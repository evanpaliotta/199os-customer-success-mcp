# 199|OS Customer Success MCP Server - DEVELOPMENT Environment
# For local development only - NOT FOR PRODUCTION USE

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

SERVER_NAME=199OS-CustomerSuccess-DEV
SERVER_PORT=8080

# Logging Configuration - Debug mode for development
LOG_LEVEL=DEBUG
LOG_FORMAT=pretty

# Database Configuration - Local PostgreSQL
DATABASE_URL=postgresql://postgres:dev_password@localhost:5432/cs_mcp_dev
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=30
DB_SSL_MODE=disable  # Disabled for local development

# Redis Configuration - Local Redis
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=20
CACHE_DEFAULT_TTL=600     # 10 minutes
CACHE_LONG_TTL=3600       # 1 hour

# Rate Limiting - Relaxed for development
MAX_REQUESTS_PER_MINUTE=10000
MAX_REQUESTS_PER_HOUR=100000
RATE_LIMIT_PER_CLIENT_PER_MINUTE=1000

# ============================================================================
# SECURITY CONFIGURATION - Development Keys (CHANGE FOR PROD)
# ============================================================================

# IMPORTANT: These are development-only keys, NEVER use in production
MASTER_PASSWORD=dev_master_password_change_me
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000
JWT_SECRET=dev_jwt_secret_change_me_for_production
MCP_API_KEY=dev_api_key_local_only
WEBHOOK_SECRET=dev_webhook_secret

# ============================================================================
# LEARNING SYSTEM CONFIGURATION
# ============================================================================

LEARNING_COMPLETION_THRESHOLD=0.70
LEARNING_FREQUENCY=often
PREFERENCES_DIR=./config/preferences

# ============================================================================
# PLATFORM INTEGRATIONS - Use test/sandbox accounts for development
# ============================================================================

# Zendesk (use sandbox account)
ZENDESK_SUBDOMAIN=dev-sandbox
ZENDESK_EMAIL=dev@localhost
ZENDESK_API_TOKEN=test_token

# Intercom
INTERCOM_ACCESS_TOKEN=test_token
INTERCOM_APP_ID=test_app

# Mixpanel (use test project)
MIXPANEL_PROJECT_TOKEN=test_token
MIXPANEL_API_SECRET=test_secret

# Gainsight
GAINSIGHT_API_KEY=test_key
GAINSIGHT_BASE_URL=https://test.gainsightcloud.com

# Amplitude
AMPLITUDE_API_KEY=test_key
AMPLITUDE_SECRET_KEY=test_secret

# SendGrid (use test mode)
SENDGRID_API_KEY=test_key
SENDGRID_FROM_EMAIL=dev@localhost
SENDGRID_FROM_NAME=Dev Team
SENDGRID_MAX_RETRIES=1
SENDGRID_RETRY_DELAY=1
SENDGRID_BATCH_SIZE=10

# Segment
SEGMENT_WRITE_KEY=test_key

# Salesforce (sandbox)
SALESFORCE_USERNAME=dev@sandbox
SALESFORCE_PASSWORD=dev_password
SALESFORCE_SECURITY_TOKEN=test_token

# HubSpot
HUBSPOT_ACCESS_TOKEN=test_token

# Slack (dev workspace)
SLACK_BOT_TOKEN=xoxb-test-token
SLACK_SIGNING_SECRET=test_secret

# Typeform
TYPEFORM_ACCESS_TOKEN=test_token

# Freshdesk
FRESHDESK_API_KEY=test_key
FRESHDESK_DOMAIN=dev-sandbox.freshdesk.com

# ============================================================================
# MCP SERVER INTEGRATIONS - Disable external services for local dev
# ============================================================================

MCP_ENABLE_ZENDESK=false
MCP_ENABLE_INTERCOM=false
MCP_ENABLE_MIXPANEL=false
MCP_ENABLE_SALESFORCE=false
MCP_ENABLE_HUBSPOT=false
MCP_ENABLE_SENDGRID=false
MCP_ENABLE_SLACK=false

MCP_CONFIG_PATH=./config/mcp_servers.json

# ============================================================================
# HEALTH SCORE CONFIGURATION
# ============================================================================

HEALTH_SCORE_WEIGHT_USAGE=0.35
HEALTH_SCORE_WEIGHT_ENGAGEMENT=0.25
HEALTH_SCORE_WEIGHT_SUPPORT=0.15
HEALTH_SCORE_WEIGHT_SATISFACTION=0.15
HEALTH_SCORE_WEIGHT_PAYMENT=0.10

HEALTH_SCORE_AT_RISK_THRESHOLD=50
HEALTH_SCORE_HEALTHY_THRESHOLD=75
HEALTH_SCORE_CHAMPION_THRESHOLD=90

CHURN_PROBABILITY_HIGH_RISK=0.70
CHURN_PROBABILITY_MEDIUM_RISK=0.40
CHURN_PROBABILITY_LOW_RISK=0.15

# ============================================================================
# ONBOARDING CONFIGURATION
# ============================================================================

TIME_TO_VALUE_TARGET=30
TIME_TO_FIRST_VALUE=7
TIME_TO_ACTIVATION=14

ONBOARDING_COMPLETION_THRESHOLD=0.80
TRAINING_COMPLETION_THRESHOLD=0.75

# ============================================================================
# RETENTION CONFIGURATION
# ============================================================================

RETENTION_CAMPAIGN_TRIGGER_SCORE=60
RETENTION_CAMPAIGN_FREQUENCY_DAYS=7
RETENTION_ESCALATION_SCORE=40

RENEWAL_REMINDER_DAYS_BEFORE=90,60,30,14,7
RENEWAL_FORECAST_WINDOW_DAYS=90

# ============================================================================
# EXPANSION CONFIGURATION
# ============================================================================

EXPANSION_MIN_HEALTH_SCORE=75
EXPANSION_MIN_USAGE_THRESHOLD=0.70
EXPANSION_MIN_TENURE_DAYS=60

UPSELL_OPPORTUNITY_THRESHOLD=0.65
CROSS_SELL_OPPORTUNITY_THRESHOLD=0.60

# ============================================================================
# SUPPORT CONFIGURATION
# ============================================================================

SUPPORT_FIRST_RESPONSE_SLA=15
SUPPORT_RESOLUTION_SLA_P1=240
SUPPORT_RESOLUTION_SLA_P2=480
SUPPORT_RESOLUTION_SLA_P3=1440

SUPPORT_ESCALATION_NO_RESPONSE_HOURS=2
SUPPORT_ESCALATION_NO_RESOLUTION_DAYS=3

# ============================================================================
# MONITORING & OBSERVABILITY - Verbose for development
# ============================================================================

ENABLE_MONITORING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_TRACING=true

AUDIT_LOG_RETENTION_DAYS=7  # Short retention for dev
AUDIT_LOG_DIR=./config/audit_logs

# Sentry disabled for local dev
# SENTRY_DSN=

# DataDog disabled for local dev
# DATADOG_API_KEY=

# ============================================================================
# FEATURE FLAGS - All enabled for development testing
# ============================================================================

FEATURE_CHURN_PREDICTION=true
FEATURE_HEALTH_SCORING=true
FEATURE_AUTOMATED_RETENTION=true
FEATURE_EXPANSION_SCORING=true
FEATURE_SENTIMENT_ANALYSIS=true
FEATURE_AUTO_TICKET_ROUTING=true
FEATURE_KNOWLEDGE_BASE_SYNC=true
FEATURE_EBR_AUTOMATION=true
